# Innlevering 2
**Team:** *Alliansen* (Gruppe 6): *Jostein Sæle, Aida Skarvatun, Anders Sortun, Guang Qing Zhang, Inana Baker, Nora Soraa*
* Lenke til Trello: https://trello.com/b/TOtWGW70/bomberman

## Prosjektrapport

Henviser også til referatene for svar på spørsmålene.

### Roller
* Hvordan fungerer rollene i teamet? Trenger dere å oppdatere hvem som er teamlead eller kundekontakt?
  - **Anders:** Syns det fungerer greit med å være lyd-ansvarlig. Kundekontakt og Discord-ansvarlig har også gått greit.
  - **Jostein:** Generelt er teamet fornøyd med Jostein som teamlead. Byttet rolle fra lydansvarlig til bildeansvarlig.
  - **Aida:** Har byttet rolle fra bildeansvarlig til å jobbe mest med programmering.
  - **Inana:** Er testansvarlig, og er innstilt på å fortsette med det.
  - **Nora:** Har vært ansvarlig for å skrive referater, og har jobbet med GameBoard-klassen og LevelReader-klassen.
  - **Guang:** Har vært testansvarlig, ansvarlig for booking av grupperom til gruppetimer, samt jobbet med klassediagram og Interfaces.

Oppsummert: Vi satte roller i starten, oppdaterte rollene underveis, og generelt er folk fornøyd med rollene de har nå.

### Prosjektmetodikk
* Er det noen erfaringer enten team-messig eller mtp prosjektmetodikk som er verdt å nevne?
  - I starten har vi prøvd ut forskjellige måter å jobbe på.
  - Prøvde litt parprogrammering, og syns det funket bra, men har ikke gjort det systematisk siden.
  - Jobbet mye i fellesskap, i gruppetimene. Fortsatt møtes to ganger i uken.
  - Jobbet hver for oss, og erfarte at det er nyttig med veldig spesifikke arbeidsoppgaver man kan jobbe hjemme.
  - Ønsker å spesifisere tydeligere arbeidsoppgaver, og det er helt ok om disse er 'små'.
  - Benyttet Trello-boardet jevnlig og ønsker å oppdatere det mer jevnlig.
  - Går gjennom all ny kode i starten av hver gruppetime.

### Gruppedynamikk og kommunikasjon.
* Hvordan er gruppedynamikken? Er det uenigheter som bør løses?
  - Gruppen er enig om at dette fungerer bra. Diskuterer løsninger på utfordringer og kommer med innspill til hverandre.

* Hvordan fungerer kommunikasjonen for dere?
  - Går bra!
  - Positivt at vi møtes 2 ganger i uken, og bruker Discord jevnlig.
  - Alle sjekker Discorden.

### Retrospektiv
* Gjør et kort retrospektiv hvor dere vurderer hva dere har klart til nå, og hva som kan forbedres. 
  - Fått til en rollefordeling som alle er fornøyd med.
  - Diskutert og prøvd ut potensielt problematiske/utfordrende ting med Git og kode i fellesskap.
  - Alle relevante dokumenter ligger i doc-mappen.
  - Enige om at vi har hatt en god plan og fulgt den hele tiden.

* Under vurdering vil det vektlegges at alle bidrar til kodebasen. 
  - I starten var det mest Jostein som commitet, men dette var ofte et resultat av fellesarbeid.
  - Inana har hatt eksamensperiode, og har derfor ikke så mange commits ennå.
  - Forskjell på hvor hyppig folk commiter mens de jobber.
  - Henviser også til referat ift oversikt over arbeidsoppgaver.

* Bli enige om maks tre forbedringspunkter fra retrospektivet, som skal følges opp under neste sprint.
  - Spesifisere tydeligere arbeidsoppgaver på slutten av hver gruppetime, også små oppgaver.
  - Oppdatere Trello-board mer jevnlig.
  - Ha flere små commits med spesifikke commit-meldinger, enn få store commits med uklare meldinger.

## Referater

### Mandag 5. februar
- **Tilstede:** Jostein, Guang, Anders
- Fremover møtes vi fast mandager kl 10 på RFB (Guang har booket grupperom).
- Laget README-fil.
- Laget en grov beskrivelse av spillet.
- Begynt på spesifikasjon: har laget MVP og et par brukerhistorier.
- Diskutert prosjektmetodikk.
- Rollefordeling: Jostein som teamlead, Anders som discord-ansvarlig, og Guang som booking-ansvarlig.
- Git-repo opprettet: Inana gir Owner/Maintainer-tilgang.

**Neste møte:**
- To gode YouTube-videoer om Git:
  - [15-minutters video om lokalt repositorium](https://www.youtube.com/watch?v=USjZcfj8yxE)
  - [4-minutters video om 'remote repository'](https://www.youtube.com/watch?v=e9lnsKot_SQ&t=174s)

### Torsdag 8. februar
- **Tilstede:** Jostein, Aida, Nora, Guang, Inana
- Bestemt roller i gruppen.
- Gjennomgått push og pull, testet konflikthåndtering.
- Diskutert bomber og ideer for utvikling.

**Neste møte:**
- Mappeoppsett og programmering.
- Lage brukerhistorier.

### Mandag 12. februar
- **Tilstede:** Jostein, Aida, Nora, Guang, Inana, Anders
- Fått oversikt over mappeoppsettet.
- Lastet inn brettet som tekst-fil.
- Diskusjon om modell og view implementasjon.

**Neste møte:**
- Oppgi kilder.
- Fullføre prosjektmetodikken.
- Kode og tenke på implementasjon av spillet.

### Torsdag 15. februar
- **Tilstede:** Jostein, Aida, Nora, Guang, Anders
- Testet par-programmering.
- Oppsummert arbeidet.
- Tenkt på videre prosjektorganisering, inkludert test-drevet utvikling.

**Til neste gang:**
- Lage egen bransh for å teste ideer.
- Tenke på hvordan klokken i spillet kan fungere.

### Mandag 19. februar
- **Tilstede:** Jostein, Aida, Nora, Guang, Inana
- Snakket om modellen og view.
- Implementert deler av modellen og view.
- Diskutert skalering og fordeler/ulemper.

**Til neste gang:**
- Begynne tegningen av enkle objekter.
- Se gjennom oppgaver på Kanban-boardet.
- Få oversikt over Semesteroppgave del B.

### Torsdag 22. februar
- **Tilstede:** Jostein, Aida, Nora, Guang, Anders
- Snakket og planlagt for Semesteroppgave del B innlevering.
- Diskutert arbeidsfordeling og oppdatert kravdokumenter.

**Arbeidsfordeling:**
- Aida: Player.
- Anders: AudioPlayer.
- Guang: Klassediagram, Interface.
- Jostein: Bilder.
- Nora: Omskrive LevelReader og GameBoard.

**Til neste gang:**
- Jobbe med oppgavene for å oppnå MVP.
- Sette seg inn i hva som skal leveres.
- Skrive tester.

### Mandag 26. februar
- **Tilstede:** Aida, Guang, Jostein.
- Diskutert endringer siden sist møte.
- Implementert nye metoder i Player og modell.
- Diskutert endringer i bombelogikken.

**Til neste gang:**
- Jobbe med oppgavene for å oppnå MVP.
- Oppdatere docs jevnlig.
- Skrive tester.
- Aida: Tester til Player.
- Jostein: Tester til Explosion.
- Guang: Tester til Explosion-metoder i modell.

### Torsdag 29. februar
- **Tilstede:** Jostein, Aida, Nora, Guang, Inana
- Diskutert hva som mangler og hva som er under arbeid.
- Jobbet med bomber, LevelReader, og enemy logikk.

**Til neste gang:**
- Jobbe med oppgavene for å oppnå MVP.
- Sette seg inn i hva som skal leveres.
- Skrive tester.

### Mandag 4. mars
- **Tilstede:** Jostein, Aida, Nora, Guang, Inana, Anders
- Skrevet ferdig Prosjektrapporten.
- Begynt på Krav og spesifikasjon.
- Gjennomgått gjenværende krav.

**Til neste gang:**
- Skrive krav i henhold til OppdatertMVP.txt.
- Jobbe med egne oppgaver og skrive tester.
- Oppdatere docs jevnlig.
- Aida: Krav og tester for Player og Explosion.
- Guang: Krav og tester for Health og Goal.
- Nora: Krav og tester for Damage.
- Inana: Krav og tester for GameState og Timer.
- Jostein: Renskrive egne krav og prosjektrapport.
- Anders: Skrive tester for AudioPlayer, lage konstanter for audio.

## KRAV

- Oppdater hvilke krav dere har prioritert, hvor langt dere har kommet og hva dere har gjort siden forrige gang. Er dere kommet forbi MVP? Forklar hvordan dere prioriterer ny funksjonalitet.
  - Denne sprinten har vi jobbet med kravene til MVP som vi definerte i starten av prosjektet.
  - Vi har implementert nesten all koden som trengs for å tilfredsstille kravene, minus noen tester.
  - Hvis vi mangler tester for et krav, anser vi dette kravet som ikke fullført.
  - Utenom det er vi i mål med MVP!
  - Vi prioriterte ny funksjonalitet ved å ta ett og ett krav fra MVP, og jobbe med det.
  - Fremover vil vi diskutere i fellesskap hvilken ny funksjonalitet vi vil legge inn. I tillegg bruker vi det gamle NES-spillet som 'rettesnor' for hvordan spillet skal bli.

---

## FERDIGE KRAV:

### 1. En level kan 'tegnes' i txt-fil, og kan bli lest inn i programmet.

- **Brukerhistorier:**
  - "Som spiller har jeg lyst til å kunne lage mine egne kart, som jeg kan spille i".
  - "Som gruppeleder som skal vurdere oppgaven, vil det være positivt at kartet ikke er 'hardkodet' inn i selve programmet, men blir heller lest inn som en ressurs."

- **Arbeidsoppgaver:**
  - Lag Grid-objekt, som inneholder Empty eller Wall.
  - Lag initielle Player, Enemy og Barrel-objekter.
  - Lag LevelReader, som kan lese inn en tekstfil og opprette overnevnte objekter utifra tekst-filen.

- **Akseptanskriterier:**
  - Test - grid blir lest inn fra tekstfil.
  - Test - grid har riktige dimensjoner.
  - Test - grid har forventet innhold, ut ifra tekstfilen som ble matet inn.
  - Test - levelReader.
    - Det blir lastet inn posisjoner for spiller-objektet, tønne-objekter og fiende-objekter utifra txt-filen.
    - Disse objektene har riktig koordinater utifra txt-filen.

### 2. Enkel representasjon av kartet vises på skjermen (enkel grid). Trenger ikke å ha bilder, kun farger.

- **Brukerhistorier:**
  - "Som programmør er det viktig at jeg får en visuell representasjon av det jeg lager, sånn at jeg kan teste det manuelt."

- **Arbeidsoppgaver:**
  - Lage et View, med en draw()-metode.
  - Lag BomberMan-hovedfil, som View kan ligge i.
  - Kall view.draw() i render-loopen, med ShapeRender-object.

- **Akseptanskriterier:**
  - Manuell test - Vi ser at grid blir tegnet opp på skjermen med enkle farger.

### 3. Spiller, fiender, bomber og eksplosjoner representert visuelt

- **Brukerhistorier:**
  - "Som spiller er det viktig at jeg kan se de relevante objektene i spillet, f.eks spiller og fiender."
  - "Som programmør er det nyttig å få en visuell representasjon av de forskjellige objektene."

- **Arbeidsoppgaver:**
  - Lage spiller-, fiende-, bombe-, og eksplosjons-objekt.
  - Lage draw()-metode for alle overnevnte i GameView.

- **Akseptanskriterier:**
  - Manuell test - Vi ser at objektene blir tegnet opp på skjermen med enkle farger.

### 4. Eksplosjoner:

- **Brukerhistorier:**
  - "Som spiller ønsker jeg å kunne legge ut bomber som eksploderer, sånn at jeg kan drepe fiender og vinne spillet."
  - "Som programmør er det viktig at eksplosjons-logikken tydelig fremgår av koden, slik at den blir enkel for andre å lese og sette seg inn i."

- **Arbeidsoppgaver:**
  - isExplodable. Sjekker om en celle kan eksplodere. Tønner/fiender/spiller - ja, vegger - nei.
  - permitsPropagation. Sjekker om en celle har vegg eller barrel.
  - fireInDirection. Sjekker om eksplosjoner blir lagt ut på de riktige posisjonene i en retning.
  - addImpactPositions. Sjekker at eksplosjoner i alle retninger blir lagt til riktig.

- **Akseptanskriterier:**
  - Test - Sjekker at eksplosjoner har ønsket range.
  - Test - Sjekker at eksplosjoner stoppes av vegger, fiender og tønner.

### 5. Spilleren kan beveges med tastatur.

- **Brukerhistorier:**
  - "Som spiller foretrekker jeg å kunne styre en karakter i spillet med tastetrykk."
  - "Som programmør er det viktig å skille eventhåndtering fra endringer i modellen, for å unngå utilsiktede endringer i spillets tilstand."
  - "Som spillutvikler er det viktig at spilleren ikke beveger seg inn i vegger, eller utenfor brettet."

- **Arbeidsoppgaver:**
  - Lag Controller-klasse som håndterer key-inputs fra KeyListener.
  - Abstraher vekk key-events ved å opprette et 'virtuelt' tastatur (Bomberman-tastatur).
  - La dette Bomberman-tastaturet få tilgang til modellen, og lag metode i modellen som endrer spillerens posisjon.
  - Lag en move-metode i player.
    - Kan ikke gå ut av grid.
    - Kan ikke gå inn i vegger.
    - Kan ikke gå inn i fiender.

- **Akseptanskriterier:**
  - Test - isValidMove
    - Spilleren kan ikke bevege seg utenfor grid.
    - Spilleren kan ikke bevege seg inn i vegger / tønner / fiender.
    - Sjekker at spilleren flytter til rett celle via isValid

## KRAV VI HOLDER PÅ MED (mangler tester):

### 1. Spilleren kan plassere bomber ved tastetrykk

- **Arbeidsoppgaver:**
  - Sjekk om player har tilgjengelige bomber.
  - Opprett kall på modell fra kontroller.
  - Opprett bombe-objekt.

- **Akseptansekriterier:**
  - Test: Ikke legg bombe hvis bombs er lik 0.
  - Test: Bombe opprettes på spillers posisjon ved tastetrykk

### 2. Bombe fører til eksplosjon

- **Arbeidsoppgaver:**
  - Opprette eksplosjon-objekt når timer går ut.
  - Lage metoder som går igjennom aktuelle celler og 'eksploderer' dem dersom mulig.

- **Akseptansekriterier:**
  - Test: Sjekk at eksplosjon opprettes når timer går ut.
  - Test: Sjekk at eksplosjonen går to ruter i hver retning, men stoppes av vegg.

### 3. Eksplosjoner påvirker omgivelsene

- **Arbeidsoppgaver:**
  - Sjekk hvilke entities som er innenfor impact.
  - Behandle eventuelle entities etter type.

- **Akseptansekriterier:**
  - Test: Hvis fiende er i impact -> fjernes.
  - Test: Hvis Barrel tilstede i impact -> fjernes.
  - Test: Hvis Player i impact -> tar skade.

### 4. Kan ha tekst som sier om spillet er i gang eller game-over etc:

- **Brukerhistorier:**
  - "Som spiller ønsker jeg å se tydelig informasjon om spillets tilstand, slik som om spillet er i gang, er pauset, eller er ferdig."
  - "Som spillutvikler ønsker jeg å enkelt kunne implementere og håndtere ulike spilltilstander, slik som startskjerm, spill i gang, pause og spill ferdig, for å gi spillerne en sømløs spillopplevelse."

- **Arbeidsoppgaver:**
  - Implementere tekstvisning i grensesnittet for å vise gjeldende spillstatus.
  - Oppdatere tekstvisningen basert på endringer i spillets tilstand.

- **Akseptansekriterier:**
  - Test: Sjekk at tekstvisningen viser riktig informasjon når spillet starter, er i gang, er satt på pause eller er ferdig.
  - Test: Verifiser at tekstvisningen oppdateres korrekt når spilltilstanden endres.

### 5. Kan ha global timer som teller ned.

- **Brukerhistorier:**
  - "Som spiller ønsker jeg å ha en global nedtellingsfunksjon som viser hvor mye tid som gjenstår i spillet."
  - "Som spillutvikler trenger jeg en global nedtellingstimer-funksjon som lar meg ha tidsbegrensninger og hendelsesstyring i spillet mitt, for å skape spennende spillscenarier."

- **Arbeidsoppgaver:**
  - Implementere en global nedtellingsfunksjon som viser gjenværende tid i spillet.
  - Oppdatere nedtellingen i sanntid basert på spillets framgang.

- **Akseptansekriterier:**
  - Test: Sjekk at nedtellingen vises tydelig i grensesnittet og oppdateres korrekt.
  - Test: Verifiser at nedtellingen fungerer som forventet og tar hensyn til spillets utfall.

### 6. Spilleren har HP, hvis spilleren dør, slutter spillet

- **Brukerhistorier:**
  - "Som spillutvikler er det viktig at karakteren i spillet kan dø ved health points lik 0."

- **Arbeidsoppgaver:**
  - Sjekk HP til spilleren.
  - GameState skal endres til GAME_OVER.

- **Akseptanskriterier:**
  - Test - Hvis HP er mindre eller lik 0, skal GameState endres til GAME_OVER.
  - Manuell test - "Game Over" skal vises på skjermen.

### 7. Hvis spilleren har drept alle fiendene er hen i mål

- **Brukerhistorier:**
  - "Som spillutvikler er det viktig at spilleren kan vinne etter å ha drept alle fiendene."

- **Arbeidsoppgaver:**
  - Sjekk om listen som inneholder fiender er tom.
  - GameState skal endres til LEVEL_FINISHED.

- **Akseptanskriterier:**
  - Test - Hvis listen med fiender er tom, skal GameState endres til LEVEL_FINISHED.
  - Manuell test - "You Win!" skal vises på skjermen.

## Kommentarer til Kode
* Generelt: vi har masse kommentarer i selve koden vår, henviser til disse.
* LevelReader :: rightDimension - Denne fungerer ikke på Windows, skal utbedres senere.
* GameModelTest :: isCellExplodingTest - Denne testen passerer ikke ennå, vi jobber med å finne årsaken.